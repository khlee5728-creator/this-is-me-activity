@tailwind base;
@tailwind components;
@tailwind utilities;

/* === 모바일 크로스 플랫폼 호환성 CSS === */

/* Safe Area 변수 (노치, 홈 인디케이터 대응) */
:root {
  --sat: env(safe-area-inset-top, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
}

/* 터치 최적화 */
html {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  touch-action: manipulation;
}

/* 더블탭 줌 방지 */
* {
  touch-action: manipulation;
}

/* 버튼/링크 터치 최적화 */
button, a, [role="button"] {
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
}

/* iOS 입력 필드 줌 방지 (16px 미만 시 자동 줌됨) */
input, textarea, select {
  font-size: 16px;
}

body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
  background-color: #F5F5DC;
  /* 모바일 최적화 */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  user-select: none;
  -webkit-user-select: none;
}

#root {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

#stage {
  position: absolute;
  width: 1280px;
  height: 800px;
  background-color: #F5F5DC;
  box-sizing: border-box;
  transform-origin: top left;
  overflow: hidden;
  /* 기본적으로 스크롤 숨김 */
  /* left, top, transform은 JavaScript에서 동적으로 설정됨 */
}

/* 스크롤이 필요할 때만 표시 */
#stage.scrollable {
  overflow: auto;
}

/* 스크롤바 스타일링 - 기본적으로 완전히 숨김 */
#stage::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
  background: transparent;
}

/* 스크롤이 필요할 때만 스크롤바 표시 */
#stage.scrollable::-webkit-scrollbar {
  display: block;
  width: 8px;
  height: 8px;
}

#stage.scrollable::-webkit-scrollbar-track {
  background: #f1f1f1;
}

#stage.scrollable::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

#stage.scrollable::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Firefox용 스크롤바 숨김 */
#stage {
  scrollbar-width: none;
}

#stage.scrollable {
  scrollbar-width: thin;
}

/* 비디오 요소의 검은색 배경 제거 */
video {
  background-color: white !important;
  background: white !important;
}

video::-webkit-media-controls-panel {
  background-color: transparent;
}

/* 비디오 컨테이너 내부의 검은색 배경 제거 */
video::before,
video::after {
  background-color: white !important;
}

/* 비디오가 로드되기 전의 배경도 흰색으로 */
video:not([src]) {
  background-color: white !important;
}

/* iOS Safari 100vh 문제 대응 */
@supports (-webkit-touch-callout: none) {
  #root {
    height: -webkit-fill-available;
  }
}

/* 가로/세로 모드 전환 시 Safe Area 대응 */
@media screen and (orientation: landscape) {
  #root {
    padding-left: var(--sal);
    padding-right: var(--sar);
  }
}

@media screen and (orientation: portrait) {
  #root {
    padding-top: var(--sat);
    padding-bottom: var(--sab);
  }
}
